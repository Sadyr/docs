
# Установка
## Linux

Для установки утилиты aws необходимо выполнить следующие шаги:
1. Скачать установочный файл одним из следующих  способов:
* Использовать команду "curl" . Параметр "-o" указывает название скачанного файла  в системе
```shell
curl "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip" -o "awscliv2.zip"
```
* Скачать файл перейдя по ссылке в браузере:
URL для скачивание файла:  https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip

2. Разархивировать установочный файл. На этом примере будет использоваться утилита unzip.
```shell
unzip awscliv2.zip
```
3. Запустить установшик
```shell
sudo ./aws/install
```
4. Проверить версию установленной утилиты с помощью следующей команды:
```shell
aws --version
```

Более подробно с процессом установки утилиты командной строки aws можно ознакомиться на странице официальной документации: https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html
# Конфигурирование

### Получение параметров для настройки инстрмента от PS CLOUD

Ключи для доступа к контейнерам можно получить по инструкции: <Здесь ссылка на инструкцию>

Основные параметры для управление облачным хранилищем:
* bucket_name: Название контейнера в облаке
* region:  Название региона, где обслуживается инфраструктура сервиса. На данный момент есть три региона: kz-ala-1, kz-ast-1 и uz-tas-1
 * access_key: Ключи доступа к контейнерам в облачном хранилище
 * secret_key: Секрет ключи для доступа к контейнам в облачном хранилище
* endpoint_url: URL адрес облачного сервиса.


```bash
bucket_name="mybucket01"
region="kz-ala-1"
access_key="HUUJNMK:MHIJNMFNRKJFNCLJNCTLJCNT"
secret_key="IJOKRLJCJLCNJKRCNKLRCNJLNTLJCNTJC"
endpoint_url="https://object.pscloud.io"
```

### Настройки файла конфигурации и учетных данных (Credentials and Configurations )

Значение  конфигурационных и учетных параметров  хранятся в файлах которые обслуживаются утилитой  командной строки **aws**.
Есть два вида файла где определяются конфигурационные и  параметры учетных записей:

**credentials** - В данном файле сохраняются параметры учетных записей, кто выполняет вызовы к API AWS. В системах **Mac** и **Linux** файл распологается по данному пути:
~/.aws/credentials , для систем **Windows**: C:\Users\USERNAME\\.aws\credentials

**config** - В данном файле определяются другие параметры, которые указывают каким образом обрабатывать запросы. Например, название региона(region) или формат вывода (output format) . В системах **Mac** и **Linux** файл распологается по данному пути:
~/.aws/config , для систем **Windows**: C:\Users\USERNAME\\.aws\config

> Параметры для работы утилиты командной строки могут быть определены так же в переменном окружении или при  запуске команд.

Файлы конфигурации и учетных записей в процессе настройки раздалеются на **профили**. По умолчанию, утилита **aws** использует имя профиля **default**. Чтобы использовать альтернативные настройки, Вы можете создать и настроить дополнительные профили.

Для того чтобы установить параметры для  файлов **config** и **credentials** введите следующую команду:

```shell
aws configure
```
 После запуска команды, у Вас запросят установить следующие значения:
 * AWS Access Key ID - Ключ доступа к контейнеру в облачном хранилище
*  AWS Secret Access - Секретный ключ доступа к облачном хранилищу
 * Default region name - Название региона где обслуживается контейнер
 * Default output format - формат вывода данных 

Чтобы устанавливать значение для определенного параметра, используется команда: 'aws configure set '. Например, можно установить значение  параметра для конкретного профиля.  В следующем примере устанавливаем значение  параметра "region" для профиля "integ".

```shell
aws configure set region kz-ast-1 --profile integ
```

Для того чтобы удалять настройки, используйте пустую строку. Например:
```shell
aws configure set cli_pager "" --profile integ
```

Получить значение какого либо параметра можно с помощью команды "aws configure get" . В следующем примере получаем название региона для профиля "integ".
```shell
aws configure get region --profile integ
```

Чтобы получить список конфигурационных данных выполняется команда:
```shell
aws configure list

```

Более подробно про настройку файлов конфигурации и учетных записей можно получить в официальной документации : https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-files.html
### Опции командной строки
Через опции командной строки можно переопределить параметры обозначенный в файлах конфигурации или в переменном окружении. 

#### Как использовать опции командной строки
Большинство опций командной строки передаются в виде обычного текста, например, название профиля:
```shell
aws s3 ls --profile profile1

```

#### Глобальноые опции командной строки поддерживаемый AWS CLI
*  --**debug** - Включает режим логгирование, при котором выводится детальная информация о запросе.
* **--endpoint-url** - Указывает URL адрес сервиса, куда необходимо отправлять запросы.
```shell
aws s3 ls --endpoint-url "https://object.pscloud.io"
```
* **--output** - Указывает формат вывода для утилиты. Можно указать один из следующих значений: json,yaml,yaml-stream,text и table.
* **--profile** - Указывает название профиля, от имени которого будет запускаться команда
```shell 
aws configure --profile <profilename>
```
* **--region** - Указывается регион, куда будет отправляться запрос

Более подробную информацию про опции утилиты командной строки можно получить в странице официальной документации: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-options.html